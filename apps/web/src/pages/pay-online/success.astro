---
import Button from "@components/Button.astro";
import Heading from "@components/Heading.astro";
import Section from "@components/Section.astro";
import Trim from "@components/global/Trim.astro";
import Default from "@layouts/Default.astro";
import CircleCheck from "@lucide/astro/icons/circle-check";
import House from "@lucide/astro/icons/house";
import CreditCard from "@lucide/astro/icons/credit-card";

const title = "Payment successful";
const description = "Thank you for your payment. A confirmation receipt has been sent to your email address.";
---

<Default title={title} description={description} allowIndexing={false}>
  <Section>
    <div class="container-6c">
      <div class="flex flex-col items-center gap-6 text-center">
        <CircleCheck class="text-positive size-16" />
        <Heading as="h1" class="text-h2" set:text={title} />
        <p class="text-lg" set:text={description} />
        <div class="flex flex-col gap-4 sm:flex-row">
          <Button label="Return home" href="/" variant="solid">
            <House slot="suffix" />
          </Button>
          <Button label="Make another payment" href="/pay-online/" variant="outline">
            <CreditCard slot="suffix" />
          </Button>
        </div>
      </div>
    </div>
  </Section>
  <Fragment slot="footer">
    <footer id="p_footer-group">
      <Trim />
    </footer>
  </Fragment>
</Default>

<script>
  const params = new URLSearchParams(window.location.search);
  const redirectStatus = params.get("redirect_status");

  if (redirectStatus && redirectStatus !== "succeeded") {
    window.location.href = "/pay-online/failed/";
  }
</script>
